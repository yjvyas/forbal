<?xml version="1.0"?>

<robot xmlns:xacro="http://ros.org/wiki/xacro">
<xacro:include filename="$(find forbal_description)/urdf/material.xacro" />
<xacro:macro name="forbal2" params="parent *origin">
    <link name="base">
        <inertial>
            <origin rpy="0.00000000 0.00000000 0.00000000" xyz="0.00001204 -0.00000000  0.12463264"/>
            <mass value="0.52805217"/>
            <inertia ixx="0.00561054" ixy="0.00000000" ixz="-0.00000073" iyy="0.00498348" iyz="0.00000123" izz="0.00099429"/>
        </inertial>
        <visual>
            <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
            <geometry>
                <mesh filename="package://forbal_description/meshes/base.dae" scale="1.00000000 1.00000000 1.00000000"/>
                <!-- <mesh filename="$(find forbal_description)/meshes/base.dae" scale="1.00000000 1.00000000 1.00000000"/> -->
            </geometry>
            <material name="grey" />
        </visual>
    </link>
    <link name="link11">
        <inertial>
            <origin rpy="0.00000000 0.00000000 0.00000000" xyz="-0.00489125 -0.00000574  0.00230041"/>
            <mass value="0.29281186"/>
            <inertia ixx="0.00015948" ixy="-0.00021956" ixz="0.00002365" iyy="0.00512981" iyz="-0.00000000" izz="0.00524239"/>
        </inertial>
        <visual>
            <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
            <geometry>
                <mesh filename="package://forbal_description/meshes/link_11.dae" scale="1.00000000 1.00000000 1.00000000"/>
            </geometry>
            <material name="grey" />
        </visual>
    </link>
    <link name="link12">
        <inertial>
            <origin rpy="0.00000000 0.00000000 0.00000000" xyz="0.12256792 0.01729808 0.00211240"/>
            <mass value="0.09554154"/>
            <inertia ixx="0.00002618" ixy="-0.00001700" ixz="0.00000456" iyy="0.00040772" iyz="0.00000046" izz="0.00042348"/>
        </inertial>
        <visual>
            <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
            <geometry>
                <mesh filename="package://forbal_description/meshes/link_12.dae" scale="1.00000000 1.00000000 1.00000000"/>
            </geometry>
            <material name="grey" />
        </visual>
    </link>
    <link name="link21">
        <inertial>
            <origin rpy="0.00000000 0.00000000 0.00000000" xyz="-0.01196349 -0.00041782  0.00180672"/>
            <mass value="0.29126576"/>
            <inertia ixx="0.00017104" ixy="-0.00001931" ixz="0.00002292" iyy="0.00539388" iyz="-0.00000015" izz="0.00552078"/>
        </inertial>
        <visual>
            <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
            <geometry>
                <mesh filename="package://forbal_description/meshes/link_11.dae" scale="1.00000000 1.00000000 1.00000000"/>
            </geometry>
            <material name="grey" />
        </visual>
    </link>
    <link name="link22">
        <inertial>
            <origin rpy="0.00000000 0.00000000 0.00000000" xyz="-0.02274975 -0.01512589  0.00189109"/>
            <mass value="0.15367895"/>
            <inertia ixx="0.00003746" ixy="-0.00000308" ixz="-0.00000661" iyy="0.00263097" iyz="-0.00000004" izz="0.00265092"/>
        </inertial>
        <visual>
            <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
            <geometry>
                <mesh filename="package://forbal_description/meshes/link_22.dae" scale="1.00000000 1.00000000 1.00000000"/>
            </geometry>
            <material name="grey" />
        </visual>
    </link>
    <link name="ee">
        <inertial>
            <origin rpy="0.00000000 0.00000000 0.00000000" xyz="0.01099440 0.00085185 0.00000028"/>
            <mass value="0.04366081"/>
            <inertia ixx="0.00002006" ixy="0.00000042" ixz="-0.00000000" iyy="0.00001407" iyz="0.00000000" izz="0.00003106"/>
        </inertial>
        <visual>
            <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
            <geometry>
                <mesh filename="package://forbal_description/meshes/link_ee.dae" scale="1.00000000 1.00000000 1.00000000"/>
            </geometry>
            <material name="grey" />
        </visual>
    </link>
    <link name="ee_mkr">
        <inertial>
            <origin rpy="0.00000000 0.00000000 0.00000000" xyz="0.00000000 0.00000000 0.00000000"/>
            <mass value="0.00000000"/>
            <inertia ixx="0.00000000" ixy="0.00000000" ixz="0.00000000" iyy="0.00000000" iyz="0.00000000" izz="0.00000000"/>
        </inertial>
    </link>
    <!-- <link name="lc1">
        <inertial>
            <origin rpy="0.00000000 0.00000000 0.00000000" xyz="0.00000000 0.00000000 0.00000000"/>
            <mass value="0.00000000"/>
            <inertia ixx="0.00000000" ixy="0.00000000" ixz="0.00000000" iyy="0.00000000" iyz="0.00000000" izz="0.00000000"/>
        </inertial>
    </link>
    <link name="lc2">
        <inertial>
            <origin rpy="0.00000000 0.00000000 0.00000000" xyz="0.00000000 0.00000000 0.00000000"/>
            <mass value="0.00000000"/>
            <inertia ixx="0.00000000" ixy="0.00000000" ixz="0.00000000" iyy="0.00000000" iyz="0.00000000" izz="0.00000000"/>
        </inertial>
    </link> -->

    <joint name="origin_to_base" type="fixed">
        <xacro:insert_block name="origin" />
        <parent link="${parent}" />
        <child link="base" />
        <axis xyz="0 0 1" />
    </joint>
    <joint name="joint11" type="revolute">
        <parent link="base"/>
        <child link="link11"/>
        <origin rpy="0.0 0.0 0.0" xyz="0.01616000 -0.04310000  0.22750000"/>
        <axis xyz="0.0 1.00000000 0.0"/>
        <limit lower="-1.25" upper="1.45" effort="30.0" velocity="3.0"/>
    </joint>
    <joint name="joint12" type="revolute">
        <parent link="link11"/>
        <child link="link12"/>
        <origin rpy="0.0 0.0 0.0" xyz="0.20000000 0.0 0.0"/>
        <axis xyz="0.0 -1.00000000 0.0"/>
        <limit lower="-2.9" upper="2.9" effort="30.0" velocity="5.0"/>
    </joint>
    <joint name="joint21" type="revolute">
        <parent link="base"/>
        <child link="link21"/>
        <origin rpy="0.0 0.0 0.0" xyz="0.01616000 0.04310000 0.22750000"/>
        <axis xyz="0.0 -1.00000000  0.0"/>
        <limit lower="-1.5" upper="1.25" effort="30.0" velocity="3.0"/>
    </joint>
    <joint name="joint22" type="revolute">
        <parent link="link21"/>
        <child link="link22"/>
        <origin rpy="0.0 0.0 0.0" xyz="0.20000000 0.0 0.0"/>
        <axis xyz="0.0 1.00000000  0.0"/>
        <limit lower="0.3" upper="2.9" effort="30.0" velocity="5.0"/>
    </joint>
    <joint name="joint_ee" type="fixed">
        <parent link="link22"/>
        <child link="ee"/>
        <origin rpy="0.0 0.0 0.0" xyz="0.20000000 -0.04100000  0.0"/>
        <axis xyz="100"/>
    </joint>
    <joint name="joint_ee_mkr" type="fixed">
        <parent link="ee"/>
        <child link="ee_mkr"/>
        <origin rpy="0.00000000 0.00000000 0.00000000" xyz="0.02500000 0.00000000 0.00000000"/>
        <axis xyz="100"/>
    </joint>
    <!-- <joint name="joint_lc1_l12" type="fixed">
        <parent link="link12"/>
        <child link="lc1"/>
        <origin rpy="0.00000000 0.00000000 0.00000000" xyz="0.20000000 0.04520000 0.00000000"/>
        <axis xyz="100"/>
    </joint>
    <joint name="joint_lc_l22" type="fixed">
        <parent link="link22"/>
        <child link="lc2"/>
        <origin rpy="0.00000000 0.00000000 0.00000000" xyz="0.20000000 -0.04100000  0.00000000"/>
        <axis xyz="100"/>
    </joint> -->
</xacro:macro>

<xacro:macro name="ringmass" params="parent mass density radius_inner radius_outer *origin ">
    <xacro:property name="PI" value="3.1415926535897931"/>
    <xacro:property name="area" value="${PI * (pow(radius_outer, 2) - pow(radius_inner, 2))}" />
    <xacro:property name="thickness" value="${mass / (density * area)}" />
    <xacro:property name="inertiaperp" value="${mass*(3.0*(pow(radius_outer,2)+pow(radius_inner,2))+4.0*pow(thickness,2))/12.0}" />
    <xacro:property name="inertiaplane" value="${mass*(pow(radius_outer,2)+pow(radius_inner,2))/2.0}"/>
    <link name="${parent}_cm">
        <inertial>
            <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0" />
            <mass value="${mass}"/>
            <inertia ixx="${inertiaperp}" ixy="0.0" ixz="0.0" iyy="${inertiaplane}" iyz="0.0" izz="${inertiaperp}" />
        </inertial>
        <visual>
            <origin rpy="1.57079633 0.0 0.0" xyz="0.0 0.0 0.0"/>
            <geometry>
                <cylinder radius="${radius_outer}" length="${thickness}"/>
            </geometry>
            <material name="grey" />
        </visual>
    </link>
    <joint name="joint_${parent}_cm" type="fixed">
        <parent link="${parent}"/>
        <child link="${parent}_cm"/>
        <xacro:insert_block name="origin" />
        <axis xyz="100"/>
    </joint>
</xacro:macro>
</robot>
